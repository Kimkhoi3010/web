<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <template id="external_layout" inherit_id="report.external_layout">

    <xpath expr="//t[@t-call='report.external_layout_header']" position="replace">
      <t t-if="analysis_report">
        <t t-call="mtsmte_reports.analysis_report_header" />
      </t>
      <t t-else="">
        <t t-call="report.external_layout_header" />
      </t>
    </xpath>
    <xpath expr="//t[@t-call='report.external_layout_footer']" position="replace">
      <t t-if="analysis_report">
        <t t-call="mtsmte_reports.analysis_report_footer" />
      </t>
      <t t-else="">
        <t t-call="report.external_layout_footer" />
      </t>
    </xpath>
  </template>

  <template
      id="external_layout_header"
      inherit_id="report.external_layout_header"
      name="MTS / MT header override">

    <xpath expr="//div[@class='header']" position="replace">

      <div class="header default_header">
        <div class="row" name="company_address">
          <div t-att-class="'col-xs-12' if not company.report_show_address_header else 'col-xs-3 pull-left'">
            <img t-if="company.report_logo"
                 t-att-src="'data:image/png;base64,%s' % (company.report_logo,)"
                 alt="Company Logo"
                 class="img img-responsive"/>
          </div>
          <t t-if="company.report_show_address_header">
            <div class="col-xs-5 pull-right red-right">
              <!-- TODO: is this condition still needed? -->
              <ul t-if="not company.custom_footer" class="list-unstyled">
                <t t-set="company" t-value="company.sudo()"/>
                <li t-if="company.phone"><span t-field="company.phone"/></li>
                <li t-if="company.email"><span t-field="company.email"/></li>
                <li t-if="company.street"><span t-field="company.street"/></li>
                <li><t t-if="company.zip"><span t-field="company.zip"/> </t>
                    <t t-if="company.city"><span t-field="company.city"/></t></li>
              </ul>
            </div>
          </t>
        </div>
      </div>

    </xpath>
  </template>

  <template
      id="external_layout_footer"
      name="MTS / MT footer override"
      inherit_id="report.external_layout_footer">

    <xpath expr="//ul[@t-if='not company.custom_footer']" position="attributes">
      <attribute name="class">hidden</attribute>
    </xpath>

  </template>

  <template id="analysis_report_header" name="MTS / MT analysis report header">
    <div class="header analysis_header">
      <div class="page-logo">&amp;nbsp;</div>
      &amp;nbsp;
    </div>
  </template>

  <template id="analysis_report_footer" name="MTS / MT analysis report footer">
    <div class="footer analysis_footer">
      <p class="disclaimer">
        The results only concern the tested pieces.
        A partial production of this report shall not be executed without our approval.
      </p>
      <div class="report-number">Report <span t-field="doc.name"/><span> Page: <span class="page"/>/<span class="topage"/></span></div>
      <img src="/mtsmte_reports/static/src/img/MT_labels.jpg" alt="certification" class="img img-responsive cert_img"/>
    </div>
  </template>

</odoo>
