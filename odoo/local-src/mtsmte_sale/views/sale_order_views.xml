<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <record id="sale_view_inherit_specific" model="ir.ui.view">
    <field name="name">sale.order.form.specific</field>
    <field name="model">sale.order</field>
    <field name="inherit_id" ref="sale.view_order_form"/>
    <field name="arch" type="xml">
      <xpath expr="//sheet/group" position="inside">
          <field name="analyze_sample"/>
      </xpath>
      <!-- Remove Editable bottom in soline tree view -->
      <xpath expr="//tree" position="attributes">
        <attribute name="editable"/>
      </xpath>

      <xpath expr="//field[@name='partner_id']" position="after">
        <field name="commercial_partner_id" invisible="True"/>
      </xpath>

      <xpath expr="//form/group/group/field[@name='product_id']" position="after">
        <field name="chemistry" invisible="True"/>
        <field name="product_substance_ids" attrs="{'invisible': [('chemistry', '!=', 'chem')]}"
               domain="['|',('customer_id', '=', parent.commercial_partner_id),('customer_id', 'in', False)]"
               >
            <tree>
              <field name="name"/>
              <field name="sub_cas_number"/>
              <field name="customer_id" invisible="True"/>
              <field name="legal_limit_min"/>
              <field name="product_uom_id"/>
              <field name="legal_limit_max"/>
              <field name="comments"/>
              <field name="detection_limit"/>
              <field name="quantification_limit"/>
            </tree>
        </field>
      </xpath>

      <!-- Better view for sales conditions -->
      <xpath expr="//field[@name='note']" position="replace">
        <div class="oe_clear"/>
        <field name="note"
          widget="html"
          placeholder="Setup default terms and conditions in your company settings."/>
      </xpath>

      <!-- Add tested samples on so line-->
      <xpath expr="//field[@name='order_line']/tree/field[@name='name']" position="after">
        <field name="tested_sample"/>
      </xpath>
      <xpath expr="//field[@name='order_line']/form/field[@name='name']" position="after">
        <label for="tested_sample"/>
        <field name="tested_sample"/>
      </xpath>

    </field>
  </record>

  <record id="sale_view_tree_specific" model="ir.ui.view">
    <field name="name">sale.order.tree.specific</field>
    <field name="model">sale.order</field>
    <field name="inherit_id" ref="sale.view_order_tree"/>
    <field name="arch" type="xml">
      <field name="partner_id" position="after">
        <field name="client_order_ref"/>
      </field>
    </field>
  </record>

  <record id="sale_view_inherit_config_specific" model="ir.ui.view">
    <field name="name">sale.order.form.config.specific</field>
    <field name="model">sale.config.settings</field>
    <field name="inherit_id" ref="sale.view_sales_config"/>
    <field name="arch" type="xml">
      <xpath expr="//field[@name='sale_note']" position="attributes">
        <attribute name="widget">html</attribute>
      </xpath>
    </field>
  </record>
</odoo>
