<?xml version="1.0" encoding="UTF-8"?>
<odoo>

  <record id="view_pack_operation_lot_form_specific" model="ir.ui.view">
    <field name="name">stock.pack.operation.lots.form</field>
    <field name="model">stock.pack.operation</field>
    <field name="inherit_id" ref="stock.view_pack_operation_lot_form"/>
    <field name="arch" type="xml">
      <xpath expr="//field[@name='product_id']" position="after">
        <field name="picking_id"/>
        <field name="group_id"/>
      </xpath>
      <xpath expr="//field[@name='lot_id']" position="replace">
        <field
          name="lot_id"
          invisible="context.get('only_create', False)"
          domain="[('product_id','=', parent.product_id),('procurement_group_id','=', parent.group_id)]"
          context="{'default_product_id': parent.product_id, 'active_pack_operation': parent.id, 'default_procurement_group_id': parent.group_id}"
          />
      </xpath>
    </field>
  </record>

</odoo>
