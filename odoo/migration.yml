migration:
  options:
    install_command: odoo.py
    # Workaround for https://github.com/odoo/odoo/pull/12730
    # Please remove once merged.
    # Warning: the DEMO flag will never be considered as we force
    # the 'without demo' mode
    install_args: --without-demo=all --load=web,web_kanban,session_redis,attachment_s3,logging_json
  versions:
    - version: 9.1.0
      operations:
        post:
          - anthem openerp.addons.cloud_platform.songs::install_exoscale
          - oerpscenario -t setup_before_modules
          # Install account without l10n to avoid auto install
          - odoo.py -i account --stop-after-init --workers=0
          - anthem songs.install.pre_holding::no_accounting
          - oerpscenario -t setup_only_modules
          - anthem songs.install.post_holding::cleanup
          - oerpscenario -t setup_after_modules
          - anthem songs.install.data::main_first_data
          - oerpscenario -t setup
          - anthem songs.install.data::main_others_data
          - anthem songs.install.accounting::main
          - anthem songs.install.stock::main
          - anthem songs.install.company::main
          - anthem songs.install.post::main
      addons:
        upgrade:
          #camptocamp/cloud-platform
          - cloud_platform
    - version: 9.9.0
      addons:
        upgrade:
          # Odoo
          - auth_oauth
          - base # To update all addons
          # Specific
          - specific_account
    - version: 9.10.0
      operations:
        post:
          - anthem songs.install.company::setup_company_logo
      modes:
        full:
          operations:
            post:
              - anthem songs.install.accounting::configure_missing_chart_of_account
      addons:
        upgrade:
          # Specific
          - specific_base
    - version: 9.12.0
      modes:
        full:
          operations:
            post:
              - anthem openerp.addons.cloud_platform.songs::install_exoscale
      addons:
        upgrade:
          #camptocamp/cloud-platform
          - cloud_platform
    - version: 9.13.0
      addons:
        upgrade:
          # Odoo
          - board
          - subscription
          # OCA
          - account_yodlee
          - partner_changeset
          - sale_automatic_workflow
          # Specific
          - specific_base
